import{u as h,s as b,E as k,c as i,M as _,o as r,b as n,d as t,z as g,t as u,i as m,x as y,F as V,y as w,G as I}from"./vendor.e937b152.js";import{_ as K,v,P as l,l as p,A as d,k as x,c as B}from"./index.ebefc692.js";const C={name:"VaultPage",setup(){const c=h(),s=b();return k(async()=>{try{await v.getVaultById(c.params.id),await v.getKeepsByVaultId(c.params.id)}catch{s.push({name:"Home"})}}),{route:c,router:s,vault:i(()=>d.vault),keeps:i(()=>d.keeps),account:i(()=>d.account),vaultKeeps:i(()=>d.vaultKeeps),async deleteVault(a){try{await l.confirm()&&(await v.deleteVault(a),l.toast("Vault deleted","success"),s.push({name:"Home"}))}catch(e){p.error(e),l.toast(e,"error")}},async setActive(a){try{d.activeKeep=a,await x.getKeepById(a.id)}catch(e){p.error(e),_.getOrCreateInstance(document.getElementById("keep-modal")).hide(),l.toast(e,"error")}},async deleteVaultKeep(a){try{await l.confirm()&&(await B.deleteVaultKeep(a),_.getOrCreateInstance(document.getElementById("keep-modal")).hide(),l.toast("Vault keep was deleted","success"))}catch(e){p.log(e)}}}}},S={class:"container-fluid"},P={class:"row"},j={class:"col-md-12 mt-5"},A={class:"d-flex justify-content-between"},E={class:"col-md-12 d-flex mt-2"},M={class:"row"},z=["onClick"],N=["onClick"];function R(c,s,a,e,D,F){return r(),n("div",S,[t("div",P,[t("div",j,[t("h1",A,[g(u(e.vault.name)+" ",1),t("div",null,[e.vault.creatorId==e.account.id?(r(),n("button",{key:0,class:"btn btn-outline-danger",onClick:s[0]||(s[0]=m(o=>e.deleteVault(e.vault.id),["stop"]))},"Delete Vault")):y("",!0)])]),t("h5",null," Keeps: "+u(e.keeps.length),1)]),t("div",E,[t("div",M,[(r(!0),n(V,null,w(e.vaultKeeps,o=>(r(),n("div",{class:"col-md-2",style:{width:"18rem"},key:o.id},[t("div",{class:"card m-2 bg-dark sizing action","data-bs-toggle":"modal","data-bs-target":"#keep-modal",onClick:m(f=>e.setActive(o),["stop"])},[t("div",{class:"card-body d-flex align-items-end justify-content-between",style:I({backgroundImage:`url(${o.img})`})},[g(u(o.name)+" ",1),e.vault.creatorId==e.account.id?(r(),n("button",{key:0,class:"btn btn-outline-danger mdi mdi-delete",title:"Remove keep from vault",onClick:m(f=>e.deleteVaultKeep(o.vaultKeepId),["stop"])},null,8,N)):y("",!0)],4)],8,z)]))),128))])])])])}var G=K(C,[["render",R],["__scopeId","data-v-2fbb43d0"]]);export{G as default};
